# LangGraph å­¦ä¹ é¡¹ç›®

## ğŸ“š é¡¹ç›®æ¦‚è¿°

è¿™ä¸ªé¡¹ç›®æ·±å…¥ç ”ç©¶äº† LangGraph çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯**ä¸­æ–­æœºåˆ¶ä¸­çš„é‡è¦é—®é¢˜å‘ç°**ã€‚é€šè¿‡è¯¦ç»†çš„æµ‹è¯•éªŒè¯ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªå½±å“ç”Ÿäº§ç¯å¢ƒçš„å…³é”®é—®é¢˜ï¼Œå¹¶æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚

## ğŸ” é‡è¦å‘ç°ï¼šInterrupt èŠ‚ç‚¹é‡å¤æ‰§è¡Œé—®é¢˜

### é—®é¢˜æè¿°
åŒ…å« `interrupt()` çš„èŠ‚ç‚¹åœ¨ç”¨æˆ·è¾“å…¥åä¼š**å®Œå…¨é‡æ–°æ‰§è¡Œ**ï¼Œå¯¼è‡´ï¼š
- ğŸ”´ **å¤§æ¨¡å‹é‡å¤è°ƒç”¨**ï¼ˆæ— è®ºä½¿ç”¨ `invoke()` è¿˜æ˜¯ `astream()`ï¼‰
- ğŸ’° **APIæˆæœ¬ç¿»å€**
- â±ï¸ **ç”¨æˆ·è¾“å…¥å¤„ç†å»¶è¿Ÿ**
- âš ï¸ **æ½œåœ¨ç»“æœä¸ä¸€è‡´**

### éªŒè¯æµ‹è¯•
æˆ‘ä»¬åˆ›å»ºäº†å¤šä¸ªæµ‹è¯•æ–‡ä»¶æ¥éªŒè¯è¿™ä¸ªé—®é¢˜ï¼š

| æµ‹è¯•æ–‡ä»¶ | éªŒè¯å†…å®¹ | å…³é”®å‘ç° |
|----------|----------|----------|
| `test_interrupt_with_llm.py` | å¤§æ¨¡å‹é‡å¤è°ƒç”¨ | âœ… ç¡®è®¤é—®é¢˜å­˜åœ¨ |
| `test_interrupt_user_input.py` | ç”¨æˆ·è¾“å…¥å¤„ç†å»¶è¿Ÿ | âœ… ç¡®è®¤å»¶è¿Ÿé—®é¢˜ |
| `test_invoke_vs_astream.py` | invoke vs astream è¡Œä¸º | âœ… ä¸¤è€…éƒ½æœ‰é—®é¢˜ |
| `optimized_interrupt_solution.py` | ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ | âœ… åˆ†ç¦»æ–¹æ¡ˆæœ‰æ•ˆ |

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æœ€ä½³å®è·µï¼šåˆ†ç¦»å¤§æ¨¡å‹è°ƒç”¨å’Œä¸­æ–­é€»è¾‘

```python
# âŒ é—®é¢˜ä»£ç 
async def problematic_node(state):
    result = await llm.ainvoke("prompt")  # ä¼šè¢«è°ƒç”¨2æ¬¡ï¼
    user_input = interrupt({"question": "æ»¡æ„å—ï¼Ÿ", "result": result})
    return {"output": result, "feedback": user_input}

# âœ… ä¼˜åŒ–æ–¹æ¡ˆ
async def llm_node(state):
    """ä¸“é—¨è´Ÿè´£å¤§æ¨¡å‹è°ƒç”¨"""
    if not state.get("llm_completed"):
        result = await llm.ainvoke("prompt")  # åªè°ƒç”¨1æ¬¡
        return {"llm_output": result, "llm_completed": True}
    return {}

async def interrupt_node(state):
    """ä¸“é—¨è´Ÿè´£ç”¨æˆ·äº¤äº’"""
    user_input = interrupt({
        "question": "æ»¡æ„å—ï¼Ÿ", 
        "result": state["llm_output"]
    })
    return {"user_feedback": user_input}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
langgraph_learn/
â”œâ”€â”€ README.md                               # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ turtorial/
â”‚   â”œâ”€â”€ TUTORIAL_Guide.md                   # å®Œæ•´æ•™ç¨‹æŒ‡å—
â”‚   â””â”€â”€ [å…¶ä»–æ•™ç¨‹æ–‡ä»¶...]
â”œâ”€â”€ éªŒè¯æµ‹è¯•æ–‡ä»¶/
â”‚   â”œâ”€â”€ test_interrupt_with_llm.py          # éªŒè¯å¤§æ¨¡å‹é‡å¤è°ƒç”¨
â”‚   â”œâ”€â”€ test_interrupt_user_input.py        # éªŒè¯ç”¨æˆ·è¾“å…¥å»¶è¿Ÿ
â”‚   â”œâ”€â”€ test_invoke_vs_astream.py           # å¯¹æ¯”ä¸åŒè°ƒç”¨æ–¹å¼
â”‚   â””â”€â”€ optimized_interrupt_solution.py     # ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ
â””â”€â”€ [å…¶ä»–é¡¹ç›®æ–‡ä»¶...]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install langgraph langchain-core
```

### 2. è¿è¡ŒéªŒè¯æµ‹è¯•
```bash
# éªŒè¯é—®é¢˜å­˜åœ¨
python test_interrupt_with_llm.py

# å¯¹æ¯”ä¸åŒè°ƒç”¨æ–¹å¼
python test_invoke_vs_astream.py

# æŸ¥çœ‹ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ
python optimized_interrupt_solution.py
```

### 3. æŸ¥çœ‹è¯¦ç»†æ•™ç¨‹
```bash
# æŸ¥çœ‹å®Œæ•´æ•™ç¨‹
cat turtorial/TUTORIAL_Guide.md
```

## ğŸ“Š æµ‹è¯•ç»“æœæ€»ç»“

| æµ‹è¯•åœºæ™¯ | å¤§æ¨¡å‹è°ƒç”¨æ¬¡æ•° | èŠ‚ç‚¹æ‰§è¡Œæ¬¡æ•° | æˆæœ¬å½±å“ |
|----------|---------------|-------------|----------|
| `invoke()` + `interrupt()` | **2æ¬¡** âŒ | 2æ¬¡ | ğŸ’°ğŸ’° ç¿»å€ |
| `astream()` + `interrupt()` | **2æ¬¡** âŒ | 2æ¬¡ | ğŸ’°ğŸ’° ç¿»å€ |
| åˆ†ç¦»æ–¹æ¡ˆ | **1æ¬¡** âœ… | å„1æ¬¡ | ğŸ’° æ­£å¸¸ |

## ğŸ’¡ å…³é”®è¦ç‚¹

1. **é—®é¢˜æ™®éæ€§**: è¿™ä¸æ˜¯ `astream` ç‰¹æœ‰çš„é—®é¢˜ï¼Œ`invoke()` ä¹Ÿä¼šé‡å¤è°ƒç”¨
2. **æ ¹æœ¬åŸå› **: LangGraph interrupt æœºåˆ¶çš„è®¾è®¡ç‰¹æ€§
3. **è§£å†³æ–¹æ¡ˆ**: åˆ†ç¦»å¤§æ¨¡å‹è°ƒç”¨å’Œç”¨æˆ·äº¤äº’é€»è¾‘
4. **ç”Ÿäº§å½±å“**: å¯èƒ½å¯¼è‡´APIæˆæœ¬ç¿»å€ï¼Œå¿…é¡»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è€ƒè™‘

## ğŸ¯ æœ€ä½³å®è·µå»ºè®®

### ç”Ÿäº§ç¯å¢ƒ
- âœ… ä½¿ç”¨åˆ†ç¦»æ–¹æ¡ˆé¿å…é‡å¤è°ƒç”¨
- âœ… å®ç°ç¼“å­˜æœºåˆ¶å‡å°‘ä¸å¿…è¦çš„è°ƒç”¨
- âœ… ç›‘æ§APIè°ƒç”¨æ¬¡æ•°å’Œæˆæœ¬

### å¼€å‘æµ‹è¯•
- âš ï¸ å¯ä»¥æ¥å—é‡å¤è°ƒç”¨ï¼ˆæˆæœ¬è¾ƒä½ï¼‰
- âœ… ä½¿ç”¨æ‰§è¡Œè®¡æ•°å™¨ç›‘æ§é‡å¤æ‰§è¡Œ
- âœ… è¯¦ç»†è®°å½•ç”¨æˆ·äº¤äº’å†å²

## ğŸ“š å­¦ä¹ èµ„æº

- **å®Œæ•´æ•™ç¨‹**: `turtorial/TUTORIAL_Guide.md`
- **éªŒè¯æµ‹è¯•**: æŸ¥çœ‹å„ä¸ªæµ‹è¯•æ–‡ä»¶çš„è¯¦ç»†æ³¨é‡Š
- **æœ€ä½³å®è·µ**: å‚è€ƒ `optimized_interrupt_solution.py`

## ğŸ¤ è´¡çŒ®

è¿™ä¸ªå‘ç°å¯¹ LangGraph ç¤¾åŒºå¾ˆæœ‰ä»·å€¼ã€‚å¦‚æœä½ å‘ç°äº†å…¶ä»–ç›¸å…³é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– PRã€‚

---

**âš ï¸ é‡è¦æé†’**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ LangGraph çš„ interrupt åŠŸèƒ½æ—¶ï¼ŒåŠ¡å¿…è€ƒè™‘è¿™ä¸ªé‡å¤æ‰§è¡Œé—®é¢˜ï¼Œä»¥é¿å…ä¸å¿…è¦çš„APIæˆæœ¬å’Œæ€§èƒ½é—®é¢˜ã€‚
